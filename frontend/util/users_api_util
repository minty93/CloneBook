var UserApiActions = require("../actions/users_api_actions");
var CurrentUserActions = require("../actions/current_user_actions");

var UsersApiUtil = {
fetchAllUsers: function(){
  $.ajax({
    url: "api/users",
    type: "GET",
    dataType: "json",
    success: function(data){
      UserApiActions.receiveUsers(data);
    }
  });
},

fetchUser: function (id) {
   $.ajax({
     url: '/api/users/' + id,
     type: 'GET',
     dataType: 'json',
     success: function (user) {
       UserApiActions.receiveUser(user);
     }
   });
 },

 createUser: function (attrs, callback) {
   $.ajax({
     url: '/api/users',
     type: 'POST',
     dataType: 'json',
     data: attrs,
     success: function (user) {
       UserActions.receiveUser(user);
       CurrentUserActions.receive(user);
       callback && callback();
     }
   });
 }

};

module.exports = UsersApiUtil;
